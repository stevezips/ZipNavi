<!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>카테고리로 장소 검색하기</title>
    
        </head>
        <body>
            <p style="margin-top:-12px">
            </p>
            <div id="map" style="width:100%;height:1000px;"></div>

            <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b3865883078ce339c7b2bde521765d87&libraries=services"></script>
            <script>
            // 마커를 클릭하면 장소명을 표출할 인포윈도우 입니다
                var infowindow = new kakao.maps.InfoWindow({zIndex:1});

                var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
                mapOption = {
                center: new kakao.maps.LatLng(37.493082, 127.047961), // 지도의 중심좌표
                level: 3 // 지도의 확대 레벨
                };  

            // 지도를 생성합니다    
            var map = new kakao.maps.Map(mapContainer, mapOption); 

            // 장소 검색 객체를 생성합니다
            var ps = new kakao.maps.services.Places(map); 

            // var codeID = new Array();
            // //의료 관련
            // codeID[0] = 'HP8';  // 병원
            // codeID[1] = 'PM9';  // 약국
            // //학군 관련
            // codeID[2]='PS3';    // 유치원
            // codeID[3]='SC4';    // 학교
            // codeID[4]='AC5';    // 학원
            // //장보기 관련
            // codeID[5]='MT1';    // 마트
            // codeID[6]='CS2';    // 편의점
            // //문화시설
            // codeID[7]='CT1';    // 문화시설
            // //음식점과카페
            // codeID[8]='FD6';    // 음식점
            // codeID[9]='CE7';    // 카페
            // //공공기관과 지하철
            // codeID[10]='PO3';   // 공공시설
            // codeID[11]='SW8';   // 지하철
            // //관광명소와 숙박
            // codeID[12]='AT4';   // 관광명소
            // codeID[13]='AD5';   // 숙박 
            

            // 2차원 배열 선언
            var codeID = new Array();
            for(var i = 0 ; i<15 ; i++){
                codeID[i] = new Array();
            }
            //의료 관련
            codeID[0][0] = 'HP8';  // 병원
            codeID[0][1] = '병원';
            codeID[1][0] = 'PM9';  // 약국
            codeID[1][1] = '약국';
            //학군 관련
            codeID[2][0] = 'PS3';    // 유치원
            codeID[2][1] = '유치원';
            codeID[3][0] = 'SC4';    // 학교
            codeID[3][1] = '학교';
            codeID[4][0]='AC5';    // 학원
            codeID[4][1] = '학원';
            //장보기 관련
            codeID[5][0]='MT1';    // 마트
            codeID[5][1] = '마트';
            codeID[6][0]='CS2';    // 편의점
            codeID[6][1] = '편의점';
            //문화시설
            codeID[7][0]='CT1';    // 문화시설
            codeID[7][1] = '문화시설';
            //음식점과카페
            codeID[8][0]='FD6';    // 음식점
            codeID[8][1] = '음식점';
            codeID[9][0]='CE7';    // 카페
            codeID[9][1] = '카페';
            //공공기관과 지하철
            codeID[10][0]='PO3';   // 공공시설
            codeID[10][1] = '공공시설';
            codeID[11][0]='SW8';   // 지하철
            codeID[11][1] = '지하철';
            //관광명소와 숙박
            codeID[12][0]='AT4';   // 관광명소
            codeID[12][1] = '관광명소';
            codeID[13][0]='AD5';   // 숙박 
            codeID[13][1] = '숙박';
            
            for(var i = 0; i < 14; i++){
                alert(codeID[i][1] + codeID[i][0]);
                ps.categorySearch(codeID[i][0], codePlace,{useMapBounds:true});
                
            }
            var numOfPlace = 0;
            // function placeSearchCB (data, status, pagination) {
            //     if (status === kakao.maps.services.Status.OK) {
            //         console.log(data);
            //         for (var j=0; j<data.length; j++) {
            //             displayMarker(data[j]);
            //         }
            //         alert(data.length);
            //     }
            // }
            function codePlace(data, status, pagination, codeID[i][0]){
                if (status === kakao.maps.services.Status.OK) {
                    console.log(data);
                    for (var j=0; j<data.length; j++) {
                        displayMarker(data[j]);
                    }
                    alert(codeID[i][0] + data.length);
                }
            }

            // 지도에 마커를 표시하는 함수입니다
            function displayMarker(place) {
            // 마커를 생성하고 지도에 표시합니다
            var marker = new kakao.maps.Marker({
            map: map,
            position: new kakao.maps.LatLng(place.y, place.x) 
            });

            // 마커에 클릭이벤트를 등록합니다
            kakao.maps.event.addListener(marker, 'click', function() {
            // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
                 infowindow.setContent('<div style="padding:5px;font-size:12px;">' + place.place_name + '</div>');
                 infowindow.open(map, marker);
            });    
            
        }
            </script>
        </body>
    </html>